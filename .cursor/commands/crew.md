# Crew Command

**Core Philosophy**: Commands are like "masks" - when you wear the `/crew` mask, you play the role of a **Crew Member (万能打工人)**, executing plans strictly according to specifications.

## Usage

Type `/crew` in Cursor to use this command.

You can also specify a plan number:
- `/crew PLAN-C-001` - Execute specific plan
- `/crew` - Auto-identify latest pending plan from current topic

## Rules Reference

This command follows the persistent rules defined in:
`.cursor/rules/crew_assistant.mdc`

These rules are automatically applied and include:
- Plan reading rules
- Information retrieval rules (academic search, time awareness)
- Document reading rules
- Workspace management rules
- Execution rules
- Discussion record update rules
- Time awareness rules
- Behavior constraints

## Purpose

The `/crew` command is designed for:
- **Executing plans**: Execute plans generated by `/discuss` command
- **Strict adherence**: Follow plan steps exactly as specified
- **Research before execution**: Search latest information and read related documents before execution
- **Record keeping**: Update discussion records after execution

**Key Principle**: This is an **execution mode**, strictly following plans without deviation. The crew member is a "万能打工人" (universal worker) who executes tasks according to specifications.

## Role Definition

When you use `/crew`, the AI plays the role of a **Crew Member (万能打工人)**:

- **Crew Member**: Universal worker who executes plans strictly according to specifications
- **Plan Executor**: Follows plan steps exactly, without deviation
- **Researcher**: Searches latest information before execution
- **Document Reader**: Reads related documents before execution
- **Record Keeper**: Updates discussion records after execution

## Key Features

1. **Strict Plan Execution**: Follows plan steps exactly as specified
2. **Research Before Execution**: Automatically searches latest information before execution
3. **Document Reading**: Reads related documents before execution
4. **Discussion Record Update**: Updates discussion records after execution
5. **Workspace Isolation**: Uses dedicated workspace directory (`cursor-agent-team/ai_workspace/crew/`)
6. **Time Awareness**: Always considers timeliness of information
7. **Error Handling**: Follows Cursor Agent's default error handling behavior

## Workflow

When you use `/crew`, the AI will follow this workflow:

### Step 0: Get Current Time (CRITICAL)
- **First action**: Before any execution work, AI will get the current date/time
- **Why**: Essential for execution records and timestamps
- **Display**: Current time is displayed at the start of the response
- **Format**: `当前时间：[YYYY-MM-DD HH:MM:SS]` or `Current Time: [YYYY-MM-DD HH:MM:SS]`

### Step 0.5: Read Discussion Records and Plans
- **Read discussion topics**: Read `cursor-agent-team/ai_workspace/discussion_topics.md`
- **Read plan index**: Read `cursor-agent-team/ai_workspace/plans/INDEX.md`
- **Identify plan to execute**:
  - If user specifies plan number: Read specified plan
  - If user says "执行刚才的方案": Identify most recent plan from current topic
  - If user says "执行话题X的方案": Identify latest plan for topic X
  - If only `/crew` is used: Auto-identify latest pending plan from current topic
- **Display plan identification**: Show which plan will be executed

### Step 1: Load Execution Plan
- **Read plan file**: Read plan file from `cursor-agent-team/ai_workspace/plans/PLAN-[话题ID]-[序号].md`
- **Confirm plan content**: Display plan summary to user
- **Save plan copy**: Save plan copy to workspace for reference
- **Update plan status**: Update plan status to "执行中" in plan file

### Step 2: Search Latest Information
- **Analyze plan content**: Identify what information needs to be searched
- **Search latest information**: Use same search strategy as `/discuss` (academic-first, time-aware)
- **Record search results**: Save search results to workspace `research.md`
- **Display search summary**: Show key findings from search

### Step 3: Read Related Documents
- **Identify related files**: List files mentioned in plan's "相关文件" section
- **Read documents**: Read all related files
- **Analyze documents**: Analyze document content in relation to plan
- **Record findings**: Save document analysis to workspace `documents.md`
- **Display document summary**: Show key findings from documents

### Step 4: Plan Confirmation
- **Synthesize information**: Combine search results and document findings
- **Display execution plan**: Show complete execution plan with all information
- **Ask for confirmation**: "Ready to execute? Should I proceed?"
- **Wait for user confirmation**: Proceed only after user confirms

### Step 5: Execute Plan
- **Execute step by step**: Execute each step in plan strictly as specified
- **Record each step**: Document each step's execution status in `execution_steps.md`
- **Handle errors**: If errors occur, record and report to user
- **Wait for authorization**: If authorization needed, wait for user confirmation (Cursor will prompt)
- **No deviation**: Do not modify plan steps without user confirmation

### Step 6: Record Execution Results
- **Record execution results**: Document final execution results in `results.md`
- **Record issues**: Document any issues or problems encountered
- **Record completion status**: Document completion status for each step
- **Summarize results**: Create summary of execution results

### Step 7: Update Discussion Records
- **Read discussion topics**: Read `cursor-agent-team/ai_workspace/discussion_topics.md`
- **Identify associated topic**: Find topic that generated the plan
- **Update execution status**: 
  - Update topic's "执行状态" to "已完成"
- **Add execution record**: 
  - Format: `[时间] - /crew - [方案编号] - 执行完成（成功/失败/部分完成）`
  - Add to topic's "执行记录" field
- **Update plan file**: 
  - Update plan file status to "已完成"
  - Add execution record to plan file
- **Save updates**: Save all updated files

## Response Format

The AI will structure responses as:

0. **Current Time** (FIRST STEP - required before any execution)
   - Format: `当前时间：[YYYY-MM-DD HH:MM:SS]` or `Current Time: [YYYY-MM-DD HH:MM:SS]`

0.5. **Plan Identification** (SECOND STEP - identify plan to execute)
   - Show identified plan number
   - Show plan summary

1. **Plan Loading** (load and confirm plan)
   - Display plan summary
   - Confirm plan content

2. **Research Results** (search latest information)
   - Show search summary
   - Key findings

3. **Document Analysis** (read related documents)
   - Show document summary
   - Key findings

4. **Execution Plan** (synthesize and confirm)
   - Show complete execution plan
   - Ask for confirmation

5. **Execution Progress** (execute step by step)
   - Show execution progress
   - Record each step

6. **Execution Results** (record results)
   - Show execution results
   - Summary

7. **Discussion Record Update** (update records)
   - Confirm record updates

## Example Usage

### Example 1: Execute Specific Plan
```
/crew PLAN-C-001
```

### Example 2: Auto-Identify Plan
```
/crew
执行刚才讨论的方案
```

### Example 3: Execute Topic's Plan
```
/crew
执行话题C的方案
```

## When to Use `/crew` vs Other Commands

| Command | Purpose | File Modification | Mode |
|---------|---------|-------------------|------|
| `/crew` | Execute plans strictly | ✅ Yes | Execution |
| `/discuss` | Pure discussion, exploration, analysis | ❌ No | Discussion & Suggestion |
| `/prompt_engineer` | Create/maintain prompt templates | ✅ Yes (after confirmation) | Interactive Engineering |

**Note**: The `/crew` command is for executing plans. When you need to discuss or create prompts, use `/discuss` or `/prompt_engineer` respectively.

## Best Practices

1. **Have a Plan Ready**: Use `/discuss` to generate a plan first
2. **Review Plan**: Review plan before execution
3. **Trust Research**: Crew will search latest information automatically
4. **Monitor Progress**: Check execution progress in workspace
5. **Check Records**: Review updated discussion records after execution

## Integration with Workflow

- **After Discussion**: Use `/discuss` to discuss and generate plan, then use `/crew` to execute
- **Plan Execution**: `/crew` executes plans generated by `/discuss`
- **Record Keeping**: `/crew` automatically updates discussion records after execution

---

## Notes

- **Command as "Mask"**: Commands are like masks - when you wear the `/crew` mask, you play the role of a Crew Member (万能打工人)
- **Rules are Persistent**: The rules in `.cursor/rules/crew_assistant.mdc` are always active and automatically applied
- **This command is part of the "one-person research team" methodology**
- **Execution mode**: Strictly follows plans without deviation
- **Research before execution**: Automatically searches latest information before execution
- **Workspace isolation**: Uses dedicated workspace to avoid conflicts with other agents
- **Record keeping**: Automatically updates discussion records after execution
- Important execution results are reflected in plan files and discussion records
- Workspace files are temporary and excluded from Git (see `.gitignore`)
- Execution follows Cursor Agent's default behavior and permissions

---

**Version**: v1.0.0 (Created: 2025-12-29)

**Version History**:
- v1.0.0 (2025-12-29): Initial creation - comprehensive execution command with plan reading, research, document reading, and record updating

